<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¡œë¯¸ìŠ¤3</title>
</head>
<body>
    <h2>í”„ë¡œë¯¸ìŠ¤3</h2>
    <script>
        function getBanana() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve('ðŸŒ');
                }, 1000);
            });
        }

        function getApple() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve('ðŸŽ');
                }, 3000);
            });
        }

        function getOrange() {
            return Promise.reject(new Error('ì˜¤ë Œì§€ëŠ” ë‹¤ íŒ”ë¦¼!'));
        }

        // ë°”ë‚˜ë‚˜ì™€ ì‚¬ê³¼ë¥¼ ë™ì‹œì— ê°€ì§€ê³  ì˜¤ê¸°
        // ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ -> ì´ 4ì´ˆ ê±¸ë¦¼
        // ë°”ë‚˜ë‚˜ì™€ ì‚¬ê³¼ë¥¼ ë°°ì—´ì— ì €ìž¥í•´ì„œ ì½˜ì†”ì— ì¶œë ¥
        getBanana()
            .then((banana) =>
                getApple()
                    .then((apple) => [banana, apple]))
                    .then(console.log)

        // 4ì´ˆí›„ ['ðŸŒ', 'ðŸŽ']

        // Promise.all
        // ë³‘ë ¬ì ìœ¼ë¡œ í•œë²ˆì— ëª¨ë“  Promiseë“¤ì„ ì‹¤í–‰
        Promise.all([getBanana(), getApple()])
            .then((fruits) => console.log('Promise.all: ', fruits));

        // í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ê°€ ì‹¤íŒ¨
        Promise.all([getBanana(), getApple(), getOrange()])
            .then((fruits) => console.log('Error: ', fruits))
            .catch(console.log);

        // ì—ëŸ¬ê°€ ë°œìƒí•˜ë”ë¼ë„ ëª¨ë“  promiseë“¤ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜
        Promise.allSettled([getBanana(), getApple(), getOrange()])
            .then((fruits) => console.log('Promise.allSettled: ', fruits))
            .catch(console.log);

        // ì£¼ì–´ì§„ Promise ì¤‘ì—ì„œ ê°€ìž¥ ë¹¨ë¦¬ ìˆ˜í–‰ëœ ê²ƒì„ ì¶œë ¥
        Promise.race([getBanana(), getApple()])
            .then((fruit) => console.log('Promise.race: ', fruit));

        
    </script>
</body>
</html>